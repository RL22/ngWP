!function(){"use strict";angular.module("app",["ui.router","angular-loading-bar","ngSanitize","ui.bootstrap","ngAnimate","ui.router.title"])}(),function(){"use strict"}(),function(){"use strict";angular.module("app").config(["$locationProvider","$stateProvider","$urlRouterProvider",function(t,e,r){t.html5Mode({enabled:!0,requireBase:!1}),r.otherwise("/home"),e.state("home",{url:"/",templateUrl:"partials/home.html"}).state("home.more",{templateUrl:"partials/home.more.html"}).state("home.features",{templateUrl:"partials/home.features.html"}).state("about",{url:"/about",views:{"":{templateUrl:"partials/about.html"},"columnOne@about":{template:"Look I am a column!"},"columnTwo@about":{template:"Look I am a column!"}},resolve:{$title:function(){return"About"}}}).state("posts",{url:"/posts",resolve:{posts:["PostsService",function(t){return t.getPosts()}],allposts:["PostsService",function(t){return t.getAllPosts()}],$title:function(){return"Posts"}},templateUrl:"partials/posts.html",controller:"PostsController",controllerAs:"posts"}).state("post",{url:"/post/:slug",resolve:{post:["$stateParams","PostsService",function(t,e){return e.getPost(t)}],$title:["post",function(t){return t.data[0].title.rendered}]},templateUrl:"partials/single.html",controller:"PostController",controllerAs:"posts"}).state("pages",{url:"/pages",resolve:{posts:["$stateParams","PostsService",function(t,e){return e.getPages()}],$title:function(){return"Pages"}},templateUrl:"partials/posts.html",controller:"PostsController",controllerAs:"posts"}).state("page",{url:"/page/:slug",resolve:{post:["$stateParams","PostsService",function(t,e){return e.getPage(t)}],$title:["post",function(t){return t.data[0].title.rendered}]},templateUrl:"partials/single.html",controller:"PostController",controllerAs:"posts"}).state("pagination",{url:"/posts/page/:number",resolve:{posts:["$stateParams","PostsService",function(t,e){return e.postsPagination(t)}],allposts:["PostsService",function(t){return t.getAllPosts()}],$title:["$stateParams",function(t){return"Posts ("+t.number+")"}]},templateUrl:"partials/posts.html",controller:"PostsController",controllerAs:"posts"}).state("search",{url:"/search/:query",resolve:{posts:["$stateParams","PostsService","$state",function(t,e,r){return e.getSearchResult(t)}],allposts:["PostsService",function(t){return t.getAllPosts()}],$title:["$stateParams",function(t){return t.query}]},templateUrl:"partials/search.html",controller:"PostsController",controllerAs:"posts"})}]),angular.module("app").run(["$rootScope","$anchorScroll",function(t,e){t.$on("$stateChangeStart",function(t,r,s,o,n){e()})}])}(),function(){"use strict";function t(t){this.post=t.data[0]}t.$inject=["post"],angular.module("app").controller("PostController",t)}(),function(){"use strict";function t(t,e,r){this.posts=e.data,this.allPosts=t.data.length}t.$inject=["allposts","posts","$stateParams"],angular.module("app").controller("PostsController",t)}(),function(){"use strict";function t(){return{restrict:"EA",templateUrl:"partials/pagination-directive.html",controller:["$scope","$stateParams",function(t,e){var r=void 0===e.number?1:e.number,s="/posts/page/",o=t.posts.allPosts;t.postsNavLink={prevLink:s+(parseInt(r)-1),nextLink:s+(parseInt(r)+1),currentPage:r,postsCount:o/10}}]}}angular.module("app").directive("postsNavLink",t)}(),function(){"use strict";function t(){function t(t,e,r){t.getQuery=function(t){return e.queryPosts(t).then(function(t){return t.data})},t.onSelect=function(e,s,o){t.$item=e,t.$model=s,t.$label=o,r.go("search",{query:t.$label})},t.onSubmit=function(){r.go("search",{query:t.searchQuery})}}return t.$inject=["$scope","PostsService","$state"],{restrict:"EA",templateUrl:"partials/search-form-directive.html",controller:t}}angular.module("app").directive("searchForm",t)}(),function(){"use strict";function t(t){var e=this,r="http://dev:8888/wp-json/wp/v2/";e.getPosts=function(){return t.get(r+"posts")},e.getAllPosts=function(){return t.get(r+"posts?filter[posts_per_page]=-1")},e.getPost=function(e){return t.get(r+"posts?filter[name]="+e.slug)},e.getPages=function(){return t.get(r+"pages?filter[posts_per_page]=-1")},e.getPage=function(e){return t.get(r+"pages?filter[name]="+e.slug)},e.getSearchResult=function(e){return t.get(r+"posts?filter[s]="+e.query+"&filter[posts_per_page]=-1")},e.queryPosts=function(e){return t.get(r+"posts?filter[s]="+e+"&filter[posts_per_page]=-1")},e.postsPagination=function(e){return t.get(r+"posts?page="+e.number)}}t.$inject=["$http"],angular.module("app").service("PostsService",t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImxvYWRlci5qcyIsInJvdXRlcy5qcyIsImNvbnRyb2xsZXJzL3Bvc3QtY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3Bvc3RzLWNvbnRyb2xsZXIuanMiLCJkaXJlY3RpdmVzL3BhZ2luYXRpb24tZGlyZWN0aXZlLmpzIiwiZGlyZWN0aXZlcy9zZWFyY2gtZGlyZWN0aXZlLmpzIiwic2VydmljZXMvcG9zdHMtc2VydmljZS5qcyIsImFwcC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsImh0bWw1TW9kZSIsImVuYWJsZWQiLCJyZXF1aXJlQmFzZSIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJ2aWV3cyIsIiIsImNvbHVtbk9uZUBhYm91dCIsInRlbXBsYXRlIiwiY29sdW1uVHdvQGFib3V0IiwicmVzb2x2ZSIsIiR0aXRsZSIsInBvc3RzIiwiUG9zdHNTZXJ2aWNlIiwiZ2V0UG9zdHMiLCJhbGxwb3N0cyIsImdldEFsbFBvc3RzIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInBvc3QiLCIkc3RhdGVQYXJhbXMiLCJnZXRQb3N0IiwiZGF0YSIsInRpdGxlIiwicmVuZGVyZWQiLCJnZXRQYWdlcyIsImdldFBhZ2UiLCJwb3N0c1BhZ2luYXRpb24iLCJudW1iZXIiLCIkc3RhdGUiLCJnZXRTZWFyY2hSZXN1bHQiLCJxdWVyeSIsInJ1biIsIiRyb290U2NvcGUiLCIkYW5jaG9yU2Nyb2xsIiwiJG9uIiwiZSIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiLCJQb3N0Q29udHJvbGxlciIsInRoaXMiLCIkaW5qZWN0IiwiUG9zdHNDb250cm9sbGVyIiwiYWxsUG9zdHMiLCJsZW5ndGgiLCJwb3N0c05hdkxpbmsiLCJyZXN0cmljdCIsIiRzY29wZSIsImN1cnJlbnRQYWdlIiwidW5kZWZpbmVkIiwibGlua1ByZWZpeCIsInBvc3RzQ291bnQiLCJwcmV2TGluayIsInBhcnNlSW50IiwibmV4dExpbmsiLCJkaXJlY3RpdmUiLCJzZWFyY2hGb3JtIiwic2VhcmNoRm9ybUNvbnRyb2xsZXIiLCJnZXRRdWVyeSIsInF1ZXJ5UG9zdHMiLCJ0aGVuIiwib25TZWxlY3QiLCIkaXRlbSIsIiRtb2RlbCIsIiRsYWJlbCIsImdvIiwib25TdWJtaXQiLCJzZWFyY2hRdWVyeSIsIiRodHRwIiwic2VsZiIsImdldCIsIm5hbWUiLCJzbHVnIiwicyIsInBhZ2UiLCJzZXJ2aWNlIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLFlBQ0FBLFNBQUFDLE9BQUEsT0FBQSxZQUFBLHNCQUFBLGFBQUEsZUFBQSxZQUFBLHVCQ0ZBLFdBQ0EsZ0JDREEsV0FDQSxZQUNBRCxTQUFBQyxPQUFBLE9BQ0FDLFFBQUEsb0JBQUEsaUJBQUEscUJBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FHQUYsRUFBQUcsV0FDQUMsU0FBQSxFQUNBQyxhQUFBLElBR0FILEVBQUFJLFVBQUEsU0FFQUwsRUFFQU0sTUFBQSxRQUNBQyxJQUFBLElBQ0FDLFlBQUEsdUJBR0FGLE1BQUEsYUFDQUUsWUFBQSw0QkFHQUYsTUFBQSxpQkFDQUUsWUFBQSxnQ0FHQUYsTUFBQSxTQUNBQyxJQUFBLFNBQ0FFLE9BQ0FDLElBQUFGLFlBQUEsdUJBQ0FHLG1CQUFBQyxTQUFBLHVCQUNBQyxtQkFBQUQsU0FBQSx3QkFHQUUsU0FDQUMsT0FBQSxXQUFBLE1BQUEsWUFLQVQsTUFBQSxTQUNBQyxJQUFBLFNBQ0FPLFNBQ0FFLE9BQUEsZUFBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFDLGFBRUFDLFVBQUEsZUFBQSxTQUFBRixHQUNBLE1BQUFBLEdBQUFHLGdCQUVBTCxPQUFBLFdBQ0EsTUFBQSxVQUdBUCxZQUFBLHNCQUNBYSxXQUFBLGtCQUNBQyxhQUFBLFVBR0FoQixNQUFBLFFBQ0FDLElBQUEsY0FDQU8sU0FDQVMs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IjtcbnZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgWyd1aS5yb3V0ZXInLCAnYW5ndWxhci1sb2FkaW5nLWJhcicsICduZ1Nhbml0aXplJywgJ3VpLmJvb3RzdHJhcCcsICduZ0FuaW1hdGUnLCAndWkucm91dGVyLnRpdGxlJ10pXG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cInVzZSBzdHJpY3RcIjtcbi8vIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLy8gVHVybiBvZmYgdGhlIHNwaW5uZXIgZm9yIHRoZSBsb2FkZXJcbi8vICAgLmNvbmZpZyggZnVuY3Rpb24oY2ZwTG9hZGluZ0JhclByb3ZpZGVyKSB7XG4vLyAgICAgY2ZwTG9hZGluZ0JhclByb3ZpZGVyLmluY2x1ZGVTcGlubmVyID0gZmFsc2U7XG4vLyAgIH0pO1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblwidXNlIHN0cmljdFwiO1xuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29uZmlnKCBmdW5jdGlvbigkbG9jYXRpb25Qcm92aWRlciwgJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuXG4gICAgLy8gUmVtb3ZlIHRoZSAjIGZyb20gdGhlIFVSTFxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIHJlcXVpcmVCYXNlOiBmYWxzZVxuICAgIH0pO1xuICAgIFxuICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9ob21lXCIpO1xuXG4gICAgJHN0YXRlUHJvdmlkZXJcblxuICAgICAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvaG9tZS5odG1sJ1xuICAgICAgICB9KVxuXG4gICAgICAgIC5zdGF0ZSgnaG9tZS5tb3JlJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9ob21lLm1vcmUuaHRtbCcsXG4gICAgICAgIH0pXG5cbiAgICAgICAgLnN0YXRlKCdob21lLmZlYXR1cmVzJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9ob21lLmZlYXR1cmVzLmh0bWwnLFxuICAgICAgICB9KVxuXG4gICAgICAgIC5zdGF0ZSgnYWJvdXQnLCB7XG4gICAgICAgICAgICB1cmw6ICcvYWJvdXQnLFxuICAgICAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgICAgICAnJzogeyB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2Fib3V0Lmh0bWwnIH0sXG4gICAgICAgICAgICAgICAgJ2NvbHVtbk9uZUBhYm91dCc6IHsgdGVtcGxhdGU6ICdMb29rIEkgYW0gYSBjb2x1bW4hJyB9LFxuICAgICAgICAgICAgICAgICdjb2x1bW5Ud29AYWJvdXQnOiB7IHRlbXBsYXRlOiAnTG9vayBJIGFtIGEgY29sdW1uISdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAkdGl0bGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gJ0Fib3V0JzsgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0pXG5cbiAgICAgICAgLnN0YXRlKCdwb3N0cycsIHtcbiAgICAgICAgICAgIHVybDogJy9wb3N0cycsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgcG9zdHM6IGZ1bmN0aW9uKFBvc3RzU2VydmljZSkge1xuICAgICAgICAgICAgICAgICAgIHJldHVybiBQb3N0c1NlcnZpY2UuZ2V0UG9zdHMoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFsbHBvc3RzOiBmdW5jdGlvbihQb3N0c1NlcnZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBvc3RzU2VydmljZS5nZXRBbGxQb3N0cygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJHRpdGxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdQb3N0cyc7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3Bvc3RzLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Bvc3RzQ29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdwb3N0cycsXG4gICAgICAgIH0pXG5cbiAgICAgICAgLnN0YXRlKCdwb3N0Jywge1xuICAgICAgICAgICAgdXJsOiAnL3Bvc3QvOnNsdWcnLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgIHBvc3Q6IGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgUG9zdHNTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQb3N0c1NlcnZpY2UuZ2V0UG9zdCgkc3RhdGVQYXJhbXMpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJHRpdGxlOiBmdW5jdGlvbihwb3N0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3N0LmRhdGFbMF0udGl0bGUucmVuZGVyZWQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NpbmdsZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQb3N0Q29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdwb3N0cydcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ3BhZ2VzJywge1xuICAgICAgICAgICAgdXJsOiAnL3BhZ2VzJyxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICBwb3N0czogZnVuY3Rpb24oJHN0YXRlUGFyYW1zLCBQb3N0c1NlcnZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBvc3RzU2VydmljZS5nZXRQYWdlcygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJHRpdGxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdQYWdlcyc7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3Bvc3RzLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Bvc3RzQ29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdwb3N0cydcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ3BhZ2UnLCB7XG4gICAgICAgICAgICB1cmw6ICcvcGFnZS86c2x1ZycsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgcG9zdDogZnVuY3Rpb24oJHN0YXRlUGFyYW1zLCBQb3N0c1NlcnZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBvc3RzU2VydmljZS5nZXRQYWdlKCRzdGF0ZVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAkdGl0bGU6IGZ1bmN0aW9uKHBvc3QpIHtcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9zdC5kYXRhWzBdLnRpdGxlLnJlbmRlcmVkO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9zaW5nbGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUG9zdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAncG9zdHMnXG4gICAgICAgIH0pXG5cbiAgICAgICAgLnN0YXRlKCdwYWdpbmF0aW9uJywge1xuICAgICAgICAgICAgdXJsOiAnL3Bvc3RzL3BhZ2UvOm51bWJlcicsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgcG9zdHM6IGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgUG9zdHNTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQb3N0c1NlcnZpY2UucG9zdHNQYWdpbmF0aW9uKCRzdGF0ZVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhbGxwb3N0czogZnVuY3Rpb24oUG9zdHNTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQb3N0c1NlcnZpY2UuZ2V0QWxsUG9zdHMoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICR0aXRsZTogZnVuY3Rpb24oJHN0YXRlUGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuICdQb3N0cyAoJyArICRzdGF0ZVBhcmFtcy5udW1iZXIgKyAnKScgO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9wb3N0cy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQb3N0c0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAncG9zdHMnXG4gICAgICAgIH0pXG5cbiAgICAgICAgLnN0YXRlKCdzZWFyY2gnLCB7XG4gICAgICAgICAgICB1cmw6ICcvc2VhcmNoLzpxdWVyeScsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgcG9zdHM6IGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgUG9zdHNTZXJ2aWNlLCAkc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBvc3RzU2VydmljZS5nZXRTZWFyY2hSZXN1bHQoJHN0YXRlUGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFsbHBvc3RzOiBmdW5jdGlvbihQb3N0c1NlcnZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBvc3RzU2VydmljZS5nZXRBbGxQb3N0cygpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJHRpdGxlOiBmdW5jdGlvbigkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgICAgICAgICAgICByZXR1cm4gJHN0YXRlUGFyYW1zLnF1ZXJ5O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9zZWFyY2guaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUG9zdHNDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3Bvc3RzJ1xuICAgICAgICB9KTtcblxufSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnJ1bihmdW5jdGlvbigkcm9vdFNjb3BlLCAkYW5jaG9yU2Nyb2xsKXtcbiAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKGUsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpIHtcbiAgICAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBQb3N0Q29udHJvbGxlcihwb3N0KSB7XG5cblx0Ly8gR2V0IHRoZSBzaW5nbGUgcG9zdCBkYXRhXG5cdHRoaXMucG9zdCA9IHBvc3QuZGF0YVswXTtcblxuXHQvL2NvbnNvbGUubG9nKHBvc3QpOyBcblxufVxuXG5hbmd1bGFyXG4gIC5tb2R1bGUoJ2FwcCcpXG4gIC5jb250cm9sbGVyKCdQb3N0Q29udHJvbGxlcicsIFBvc3RDb250cm9sbGVyKTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblwidXNlIHN0cmljdFwiO1xuZnVuY3Rpb24gUG9zdHNDb250cm9sbGVyKGFsbHBvc3RzLCBwb3N0cywgJHN0YXRlUGFyYW1zKSB7XG5cblx0Ly8gR2V0IDEwIHBvc3RzIGF0IGEgdGltZS4uXG5cdHRoaXMucG9zdHMgPSBwb3N0cy5kYXRhO1xuXG5cdC8vIEdldCBhbGwgcG9zdHMgc28gd2UgY2FuIGNvdW50IGZvciBwYWdpbmF0aW9uLi4gXG4gICBcdHRoaXMuYWxsUG9zdHMgPSBhbGxwb3N0cy5kYXRhLmxlbmd0aDtcblxuICAgXHQvL2NvbnNvbGUubG9nKHRoaXMucG9zdHMpO1xuXG59XG5cbmFuZ3VsYXJcbiAgLm1vZHVsZSgnYXBwJylcbiAgLmNvbnRyb2xsZXIoJ1Bvc3RzQ29udHJvbGxlcicsIFBvc3RzQ29udHJvbGxlcik7XG5cblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblwidXNlIHN0cmljdFwiO1xuLy9wb3N0c05hdkxpbmsgRGlyZWN0aXZlXG5mdW5jdGlvbiBwb3N0c05hdkxpbmsoKSB7XG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0VBJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3BhZ2luYXRpb24tZGlyZWN0aXZlLmh0bWwnLFxuXHRcdC8vIEBuZ0luamVjdFxuXHRcdGNvbnRyb2xsZXI6ICBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcykge1xuXG5cdFx0XHR2YXIgY3VycmVudFBhZ2UgPSAoJHN0YXRlUGFyYW1zLm51bWJlciA9PT0gdW5kZWZpbmVkKSA/IDEgOiAkc3RhdGVQYXJhbXMubnVtYmVyLFxuXHRcdFx0XHRsaW5rUHJlZml4ID0gJy9wb3N0cy9wYWdlLycsXG5cdFx0XHRcdHBvc3RzQ291bnQgPSAkc2NvcGUucG9zdHMuYWxsUG9zdHM7XG5cblx0XHRcdCRzY29wZS5wb3N0c05hdkxpbmsgPSB7XG5cdFx0XHRcdHByZXZMaW5rOiBsaW5rUHJlZml4ICsgKHBhcnNlSW50KGN1cnJlbnRQYWdlKSAtIDEpLFxuXHRcdFx0XHRuZXh0TGluazogbGlua1ByZWZpeCArIChwYXJzZUludChjdXJyZW50UGFnZSkgKyAxKSxcblx0XHRcdFx0Y3VycmVudFBhZ2U6IGN1cnJlbnRQYWdlLFxuXHRcdFx0XHRwb3N0c0NvdW50OiAocG9zdHNDb3VudCAvIDEwKVxuXHRcdFx0fTtcblx0XHR9XG5cdH07XG5cbn1cblxuYW5ndWxhclxuXHQubW9kdWxlKCdhcHAnKVxuXHQuZGlyZWN0aXZlKCdwb3N0c05hdkxpbmsnLCBwb3N0c05hdkxpbmspXG5cblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblwidXNlIHN0cmljdFwiO1xuLy9zZWFyY2hGb3JtIERpcmVjdGl2ZVxuZnVuY3Rpb24gc2VhcmNoRm9ybSgpIHtcblxuXHQvKipcbiAgICAgKiBAbmdJbmplY3RcbiAgICAgKi9cblx0ZnVuY3Rpb24gc2VhcmNoRm9ybUNvbnRyb2xsZXIoJHNjb3BlLCBQb3N0c1NlcnZpY2UsICRzdGF0ZSkge1xuXG5cdFx0JHNjb3BlLmdldFF1ZXJ5ID0gZnVuY3Rpb24ocXVlcnkpIHtcblx0XHRcdHJldHVybiBQb3N0c1NlcnZpY2UucXVlcnlQb3N0cyhxdWVyeSlcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHRcdC8vcmV0dXJuIGxpbWl0VG9GaWx0ZXIoZGF0YS5kYXRhLCA1KTtcbiAgICAgICAgICAgIFx0XHRyZXR1cm4gZGF0YS5kYXRhO1xuICAgICAgICAgICAgXHRcdC8vY29uc29sZS5sb2coZGF0YS5kYXRhKTtcblxuICAgICAgICBcdFx0fSk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5vblNlbGVjdCA9IGZ1bmN0aW9uICgkaXRlbSwgJG1vZGVsLCAkbGFiZWwpIHtcblx0XHQgICAkc2NvcGUuJGl0ZW0gPSAkaXRlbTtcblx0XHQgICAkc2NvcGUuJG1vZGVsID0gJG1vZGVsO1xuXHRcdCAgICRzY29wZS4kbGFiZWwgPSAkbGFiZWw7XG5cdFx0ICAgIFx0JHN0YXRlLmdvKCdzZWFyY2gnLCB7cXVlcnk6ICRzY29wZS4kbGFiZWx9KVxuXHRcdCAgICAgICAgLy9jb25zb2xlLmxvZygkc2NvcGUuJGxhYmVsKTtcblx0XHR9O1xuXG5cdFx0JHNjb3BlLm9uU3VibWl0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQkc3RhdGUuZ28oJ3NlYXJjaCcsIHtxdWVyeTogJHNjb3BlLnNlYXJjaFF1ZXJ5fSlcblx0XHRcdC8vY29uc29sZS5sb2coJHNjb3BlLnNlYXJjaFF1ZXJ5KTtcblx0XHR9O1xuXG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiAnRUEnLFxuXHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvc2VhcmNoLWZvcm0tZGlyZWN0aXZlLmh0bWwnLCBcblx0XHRjb250cm9sbGVyOiBzZWFyY2hGb3JtQ29udHJvbGxlclxuXHR9XG5cbn1cblxuYW5ndWxhclxuXHQubW9kdWxlKCdhcHAnKVxuXHQuZGlyZWN0aXZlKCdzZWFyY2hGb3JtJywgc2VhcmNoRm9ybSlcblxuXG5cblxuXG5cbiAgXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBQb3N0c1NlcnZpY2UoJGh0dHApIHtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdXJsID0gJ2h0dHA6Ly9kZXY6ODg4OC93cC1qc29uL3dwL3YyLyc7XG5cbiAgICBzZWxmLmdldFBvc3RzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoIHVybCArICdwb3N0cycgKTtcbiAgICB9O1xuXG4gICAgc2VsZi5nZXRBbGxQb3N0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCB1cmwgKyAncG9zdHMnICsgJz9maWx0ZXJbcG9zdHNfcGVyX3BhZ2VdPS0xJyApO1xuICAgIH07XG5cbiAgICBzZWxmLmdldFBvc3QgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoIHVybCArICdwb3N0cycgKyAnP2ZpbHRlcltuYW1lXT0nICsgbmFtZS5zbHVnICk7XG4gICAgfTtcblxuICAgIHNlbGYuZ2V0UGFnZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCggdXJsICsgJ3BhZ2VzJyArICc/ZmlsdGVyW3Bvc3RzX3Blcl9wYWdlXT0tMScgKTtcbiAgICB9O1xuXG4gICAgc2VsZi5nZXRQYWdlID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCB1cmwgKyAncGFnZXMnICsgJz9maWx0ZXJbbmFtZV09JyArIG5hbWUuc2x1ZyApO1xuICAgIH07XG5cbiAgICBzZWxmLmdldFNlYXJjaFJlc3VsdCA9IGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCggdXJsICsgJ3Bvc3RzJyArICc/ZmlsdGVyW3NdPScgKyBzLnF1ZXJ5ICsgJyZmaWx0ZXJbcG9zdHNfcGVyX3BhZ2VdPS0xJyk7XG4gICAgfTtcblxuICAgIHNlbGYucXVlcnlQb3N0cyA9IGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCggdXJsICsgJ3Bvc3RzJyArICc/ZmlsdGVyW3NdPScgKyBzICsgJyZmaWx0ZXJbcG9zdHNfcGVyX3BhZ2VdPS0xJyk7XG4gICAgfTtcblxuICAgIHNlbGYucG9zdHNQYWdpbmF0aW9uID0gZnVuY3Rpb24ocGFnZSkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCB1cmwgKyAncG9zdHM/cGFnZT0nICsgcGFnZS5udW1iZXIgKTtcbiAgICB9O1xuXG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5zZXJ2aWNlKCdQb3N0c1NlcnZpY2UnLCBQb3N0c1NlcnZpY2UpXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsndWkucm91dGVyJywgJ2FuZ3VsYXItbG9hZGluZy1iYXInLCAnbmdTYW5pdGl6ZScsICd1aS5ib290c3RyYXAnLCAnbmdBbmltYXRlJywgJ3VpLnJvdXRlci50aXRsZSddKVxuXG59KSgpO1xuKGZ1bmN0aW9uKCl7XG5cInVzZSBzdHJpY3RcIjtcbi8vIGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLy8gVHVybiBvZmYgdGhlIHNwaW5uZXIgZm9yIHRoZSBsb2FkZXJcbi8vICAgLmNvbmZpZyggZnVuY3Rpb24oY2ZwTG9hZGluZ0JhclByb3ZpZGVyKSB7XG4vLyAgICAgY2ZwTG9hZGluZ0JhclByb3ZpZGVyLmluY2x1ZGVTcGlubmVyID0gZmFsc2U7XG4vLyAgIH0pO1xufSkoKTtcbihmdW5jdGlvbigpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoIFtcIiRsb2NhdGlvblByb3ZpZGVyXCIsIFwiJHN0YXRlUHJvdmlkZXJcIiwgXCIkdXJsUm91dGVyUHJvdmlkZXJcIiwgZnVuY3Rpb24oJGxvY2F0aW9uUHJvdmlkZXIsICRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAgIC8vIFJlbW92ZSB0aGUgIyBmcm9tIHRoZSBVUkxcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoe1xuICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICByZXF1aXJlQmFzZTogZmFsc2VcbiAgICB9KTtcbiAgICBcbiAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvaG9tZVwiKTtcblxuICAgICRzdGF0ZVByb3ZpZGVyXG5cbiAgICAgICAgLnN0YXRlKCdob21lJywge1xuICAgICAgICAgICAgdXJsOiAnLycsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2hvbWUuaHRtbCdcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ2hvbWUubW9yZScsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvaG9tZS5tb3JlLmh0bWwnLFxuICAgICAgICB9KVxuXG4gICAgICAgIC5zdGF0ZSgnaG9tZS5mZWF0dXJlcycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvaG9tZS5mZWF0dXJlcy5odG1sJyxcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ2Fib3V0Jywge1xuICAgICAgICAgICAgdXJsOiAnL2Fib3V0JyxcbiAgICAgICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAgICAgJyc6IHsgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9hYm91dC5odG1sJyB9LFxuICAgICAgICAgICAgICAgICdjb2x1bW5PbmVAYWJvdXQnOiB7IHRlbXBsYXRlOiAnTG9vayBJIGFtIGEgY29sdW1uIScgfSxcbiAgICAgICAgICAgICAgICAnY29sdW1uVHdvQGFib3V0JzogeyB0ZW1wbGF0ZTogJ0xvb2sgSSBhbSBhIGNvbHVtbiEnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgJHRpdGxlOiBmdW5jdGlvbigpIHsgcmV0dXJuICdBYm91dCc7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9KVxuXG4gICAgICAgIC5zdGF0ZSgncG9zdHMnLCB7XG4gICAgICAgICAgICB1cmw6ICcvcG9zdHMnLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgIHBvc3RzOiBbXCJQb3N0c1NlcnZpY2VcIiwgZnVuY3Rpb24oUG9zdHNTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIFBvc3RzU2VydmljZS5nZXRQb3N0cygpO1xuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIGFsbHBvc3RzOiBbXCJQb3N0c1NlcnZpY2VcIiwgZnVuY3Rpb24oUG9zdHNTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQb3N0c1NlcnZpY2UuZ2V0QWxsUG9zdHMoKTtcbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICAkdGl0bGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1Bvc3RzJztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvcG9zdHMuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUG9zdHNDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3Bvc3RzJyxcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ3Bvc3QnLCB7XG4gICAgICAgICAgICB1cmw6ICcvcG9zdC86c2x1ZycsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgcG9zdDogW1wiJHN0YXRlUGFyYW1zXCIsIFwiUG9zdHNTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgUG9zdHNTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQb3N0c1NlcnZpY2UuZ2V0UG9zdCgkc3RhdGVQYXJhbXMpO1xuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgICR0aXRsZTogW1wicG9zdFwiLCBmdW5jdGlvbihwb3N0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3N0LmRhdGFbMF0udGl0bGUucmVuZGVyZWQ7XG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9zaW5nbGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUG9zdENvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAncG9zdHMnXG4gICAgICAgIH0pXG5cbiAgICAgICAgLnN0YXRlKCdwYWdlcycsIHtcbiAgICAgICAgICAgIHVybDogJy9wYWdlcycsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgcG9zdHM6IFtcIiRzdGF0ZVBhcmFtc1wiLCBcIlBvc3RzU2VydmljZVwiLCBmdW5jdGlvbigkc3RhdGVQYXJhbXMsIFBvc3RzU2VydmljZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUG9zdHNTZXJ2aWNlLmdldFBhZ2VzKCk7XG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgJHRpdGxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdQYWdlcyc7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3Bvc3RzLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Bvc3RzQ29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdwb3N0cydcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ3BhZ2UnLCB7XG4gICAgICAgICAgICB1cmw6ICcvcGFnZS86c2x1ZycsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgcG9zdDogW1wiJHN0YXRlUGFyYW1zXCIsIFwiUG9zdHNTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgUG9zdHNTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQb3N0c1NlcnZpY2UuZ2V0UGFnZSgkc3RhdGVQYXJhbXMpO1xuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgICR0aXRsZTogW1wicG9zdFwiLCBmdW5jdGlvbihwb3N0KSB7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvc3QuZGF0YVswXS50aXRsZS5yZW5kZXJlZDtcbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NpbmdsZS5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQb3N0Q29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdwb3N0cydcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ3BhZ2luYXRpb24nLCB7XG4gICAgICAgICAgICB1cmw6ICcvcG9zdHMvcGFnZS86bnVtYmVyJyxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICBwb3N0czogW1wiJHN0YXRlUGFyYW1zXCIsIFwiUG9zdHNTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgUG9zdHNTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQb3N0c1NlcnZpY2UucG9zdHNQYWdpbmF0aW9uKCRzdGF0ZVBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgYWxscG9zdHM6IFtcIlBvc3RzU2VydmljZVwiLCBmdW5jdGlvbihQb3N0c1NlcnZpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBvc3RzU2VydmljZS5nZXRBbGxQb3N0cygpO1xuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgICR0aXRsZTogW1wiJHN0YXRlUGFyYW1zXCIsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcykge1xuICAgICAgICAgICAgICAgICAgIHJldHVybiAnUG9zdHMgKCcgKyAkc3RhdGVQYXJhbXMubnVtYmVyICsgJyknIDtcbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3Bvc3RzLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Bvc3RzQ29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICdwb3N0cydcbiAgICAgICAgfSlcblxuICAgICAgICAuc3RhdGUoJ3NlYXJjaCcsIHtcbiAgICAgICAgICAgIHVybDogJy9zZWFyY2gvOnF1ZXJ5JyxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICBwb3N0czogW1wiJHN0YXRlUGFyYW1zXCIsIFwiUG9zdHNTZXJ2aWNlXCIsIFwiJHN0YXRlXCIsIGZ1bmN0aW9uKCRzdGF0ZVBhcmFtcywgUG9zdHNTZXJ2aWNlLCAkc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBvc3RzU2VydmljZS5nZXRTZWFyY2hSZXN1bHQoJHN0YXRlUGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICBhbGxwb3N0czogW1wiUG9zdHNTZXJ2aWNlXCIsIGZ1bmN0aW9uKFBvc3RzU2VydmljZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUG9zdHNTZXJ2aWNlLmdldEFsbFBvc3RzKCk7XG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgJHRpdGxlOiBbXCIkc3RhdGVQYXJhbXNcIiwgZnVuY3Rpb24oJHN0YXRlUGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuICRzdGF0ZVBhcmFtcy5xdWVyeTtcbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NlYXJjaC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQb3N0c0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAncG9zdHMnXG4gICAgICAgIH0pO1xuXG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnJ1bihbXCIkcm9vdFNjb3BlXCIsIFwiJGFuY2hvclNjcm9sbFwiLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkYW5jaG9yU2Nyb2xsKXtcbiAgICAgICRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKGUsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpIHtcbiAgICAgICAgJGFuY2hvclNjcm9sbCgpO1xuICAgICAgfSk7XG4gICAgfV0pO1xufSkoKTtcbihmdW5jdGlvbigpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBQb3N0Q29udHJvbGxlcihwb3N0KSB7XG5cblx0Ly8gR2V0IHRoZSBzaW5nbGUgcG9zdCBkYXRhXG5cdHRoaXMucG9zdCA9IHBvc3QuZGF0YVswXTtcblxuXHQvL2NvbnNvbGUubG9nKHBvc3QpOyBcblxufVxuUG9zdENvbnRyb2xsZXIuJGluamVjdCA9IFtcInBvc3RcIl07XG5cbmFuZ3VsYXJcbiAgLm1vZHVsZSgnYXBwJylcbiAgLmNvbnRyb2xsZXIoJ1Bvc3RDb250cm9sbGVyJywgUG9zdENvbnRyb2xsZXIpO1xuXG59KSgpO1xuKGZ1bmN0aW9uKCl7XG5cInVzZSBzdHJpY3RcIjtcbmZ1bmN0aW9uIFBvc3RzQ29udHJvbGxlcihhbGxwb3N0cywgcG9zdHMsICRzdGF0ZVBhcmFtcykge1xuXG5cdC8vIEdldCAxMCBwb3N0cyBhdCBhIHRpbWUuLlxuXHR0aGlzLnBvc3RzID0gcG9zdHMuZGF0YTtcblxuXHQvLyBHZXQgYWxsIHBvc3RzIHNvIHdlIGNhbiBjb3VudCBmb3IgcGFnaW5hdGlvbi4uIFxuICAgXHR0aGlzLmFsbFBvc3RzID0gYWxscG9zdHMuZGF0YS5sZW5ndGg7XG5cbiAgIFx0Ly9jb25zb2xlLmxvZyh0aGlzLnBvc3RzKTtcblxufVxuUG9zdHNDb250cm9sbGVyLiRpbmplY3QgPSBbXCJhbGxwb3N0c1wiLCBcInBvc3RzXCIsIFwiJHN0YXRlUGFyYW1zXCJdO1xuXG5hbmd1bGFyXG4gIC5tb2R1bGUoJ2FwcCcpXG4gIC5jb250cm9sbGVyKCdQb3N0c0NvbnRyb2xsZXInLCBQb3N0c0NvbnRyb2xsZXIpO1xuXG5cbn0pKCk7XG4oZnVuY3Rpb24oKXtcblwidXNlIHN0cmljdFwiO1xuLy9wb3N0c05hdkxpbmsgRGlyZWN0aXZlXG5mdW5jdGlvbiBwb3N0c05hdkxpbmsoKSB7XG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0VBJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3BhZ2luYXRpb24tZGlyZWN0aXZlLmh0bWwnLFxuXHRcdC8vIEBuZ0luamVjdFxuXHRcdGNvbnRyb2xsZXI6ICBbXCIkc2NvcGVcIiwgXCIkc3RhdGVQYXJhbXNcIiwgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGVQYXJhbXMpIHtcblxuXHRcdFx0dmFyIGN1cnJlbnRQYWdlID0gKCRzdGF0ZVBhcmFtcy5udW1iZXIgPT09IHVuZGVmaW5lZCkgPyAxIDogJHN0YXRlUGFyYW1zLm51bWJlcixcblx0XHRcdFx0bGlua1ByZWZpeCA9ICcvcG9zdHMvcGFnZS8nLFxuXHRcdFx0XHRwb3N0c0NvdW50ID0gJHNjb3BlLnBvc3RzLmFsbFBvc3RzO1xuXG5cdFx0XHQkc2NvcGUucG9zdHNOYXZMaW5rID0ge1xuXHRcdFx0XHRwcmV2TGluazogbGlua1ByZWZpeCArIChwYXJzZUludChjdXJyZW50UGFnZSkgLSAxKSxcblx0XHRcdFx0bmV4dExpbms6IGxpbmtQcmVmaXggKyAocGFyc2VJbnQoY3VycmVudFBhZ2UpICsgMSksXG5cdFx0XHRcdGN1cnJlbnRQYWdlOiBjdXJyZW50UGFnZSxcblx0XHRcdFx0cG9zdHNDb3VudDogKHBvc3RzQ291bnQgLyAxMClcblx0XHRcdH07XG5cdFx0fV1cblx0fTtcblxufVxuXG5hbmd1bGFyXG5cdC5tb2R1bGUoJ2FwcCcpXG5cdC5kaXJlY3RpdmUoJ3Bvc3RzTmF2TGluaycsIHBvc3RzTmF2TGluaylcblxuXG59KSgpO1xuKGZ1bmN0aW9uKCl7XG5cInVzZSBzdHJpY3RcIjtcbi8vc2VhcmNoRm9ybSBEaXJlY3RpdmVcbmZ1bmN0aW9uIHNlYXJjaEZvcm0oKSB7XG5cblx0LyoqXG4gICAgICogQG5nSW5qZWN0XG4gICAgICovXG5cdGZ1bmN0aW9uIHNlYXJjaEZvcm1Db250cm9sbGVyKCRzY29wZSwgUG9zdHNTZXJ2aWNlLCAkc3RhdGUpIHtcblxuXHRcdCRzY29wZS5nZXRRdWVyeSA9IGZ1bmN0aW9uKHF1ZXJ5KSB7XG5cdFx0XHRyZXR1cm4gUG9zdHNTZXJ2aWNlLnF1ZXJ5UG9zdHMocXVlcnkpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHQvL3JldHVybiBsaW1pdFRvRmlsdGVyKGRhdGEuZGF0YSwgNSk7XG4gICAgICAgICAgICBcdFx0cmV0dXJuIGRhdGEuZGF0YTtcbiAgICAgICAgICAgIFx0XHQvL2NvbnNvbGUubG9nKGRhdGEuZGF0YSk7XG5cbiAgICAgICAgXHRcdH0pO1xuXHRcdH07XG5cblx0XHQkc2NvcGUub25TZWxlY3QgPSBmdW5jdGlvbiAoJGl0ZW0sICRtb2RlbCwgJGxhYmVsKSB7XG5cdFx0ICAgJHNjb3BlLiRpdGVtID0gJGl0ZW07XG5cdFx0ICAgJHNjb3BlLiRtb2RlbCA9ICRtb2RlbDtcblx0XHQgICAkc2NvcGUuJGxhYmVsID0gJGxhYmVsO1xuXHRcdCAgICBcdCRzdGF0ZS5nbygnc2VhcmNoJywge3F1ZXJ5OiAkc2NvcGUuJGxhYmVsfSlcblx0XHQgICAgICAgIC8vY29uc29sZS5sb2coJHNjb3BlLiRsYWJlbCk7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5vblN1Ym1pdCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0JHN0YXRlLmdvKCdzZWFyY2gnLCB7cXVlcnk6ICRzY29wZS5zZWFyY2hRdWVyeX0pXG5cdFx0XHQvL2NvbnNvbGUubG9nKCRzY29wZS5zZWFyY2hRdWVyeSk7XG5cdFx0fTtcblxuXHR9XG5cdHNlYXJjaEZvcm1Db250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCJQb3N0c1NlcnZpY2VcIiwgXCIkc3RhdGVcIl07XG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0VBJyxcblx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NlYXJjaC1mb3JtLWRpcmVjdGl2ZS5odG1sJywgXG5cdFx0Y29udHJvbGxlcjogc2VhcmNoRm9ybUNvbnRyb2xsZXJcblx0fVxuXG59XG5cbmFuZ3VsYXJcblx0Lm1vZHVsZSgnYXBwJylcblx0LmRpcmVjdGl2ZSgnc2VhcmNoRm9ybScsIHNlYXJjaEZvcm0pXG5cblxuXG5cblxuXG4gIFxufSkoKTtcbihmdW5jdGlvbigpe1xuXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBQb3N0c1NlcnZpY2UoJGh0dHApIHtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdXJsID0gJ2h0dHA6Ly9kZXY6ODg4OC93cC1qc29uL3dwL3YyLyc7XG5cbiAgICBzZWxmLmdldFBvc3RzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoIHVybCArICdwb3N0cycgKTtcbiAgICB9O1xuXG4gICAgc2VsZi5nZXRBbGxQb3N0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCB1cmwgKyAncG9zdHMnICsgJz9maWx0ZXJbcG9zdHNfcGVyX3BhZ2VdPS0xJyApO1xuICAgIH07XG5cbiAgICBzZWxmLmdldFBvc3QgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoIHVybCArICdwb3N0cycgKyAnP2ZpbHRlcltuYW1lXT0nICsgbmFtZS5zbHVnICk7XG4gICAgfTtcblxuICAgIHNlbGYuZ2V0UGFnZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCggdXJsICsgJ3BhZ2VzJyArICc/ZmlsdGVyW3Bvc3RzX3Blcl9wYWdlXT0tMScgKTtcbiAgICB9O1xuXG4gICAgc2VsZi5nZXRQYWdlID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCB1cmwgKyAncGFnZXMnICsgJz9maWx0ZXJbbmFtZV09JyArIG5hbWUuc2x1ZyApO1xuICAgIH07XG5cbiAgICBzZWxmLmdldFNlYXJjaFJlc3VsdCA9IGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCggdXJsICsgJ3Bvc3RzJyArICc/ZmlsdGVyW3NdPScgKyBzLnF1ZXJ5ICsgJyZmaWx0ZXJbcG9zdHNfcGVyX3BhZ2VdPS0xJyk7XG4gICAgfTtcblxuICAgIHNlbGYucXVlcnlQb3N0cyA9IGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLmdldCggdXJsICsgJ3Bvc3RzJyArICc/ZmlsdGVyW3NdPScgKyBzICsgJyZmaWx0ZXJbcG9zdHNfcGVyX3BhZ2VdPS0xJyk7XG4gICAgfTtcblxuICAgIHNlbGYucG9zdHNQYWdpbmF0aW9uID0gZnVuY3Rpb24ocGFnZSkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCB1cmwgKyAncG9zdHM/cGFnZT0nICsgcGFnZS5udW1iZXIgKTtcbiAgICB9O1xuXG59XG5Qb3N0c1NlcnZpY2UuJGluamVjdCA9IFtcIiRodHRwXCJdO1xuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuc2VydmljZSgnUG9zdHNTZXJ2aWNlJywgUG9zdHNTZXJ2aWNlKVxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=